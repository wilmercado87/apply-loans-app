<div class="container" align="center">
    <div class="p-mb-3">
        <p-button type="button" icon="pi pi-chevron-left" (click)="prevUsers()" [disabled]="isFirstPageUsers(userList)" styleClass="p-button-text"></p-button>
        <p-button type="button" icon="pi pi-refresh" (click)="resetUsers()" styleClass="p-button-text"></p-button>
        <p-button type="button" icon="pi pi-chevron-right" (click)="nextUsers()" [disabled]="isLastPageUsers(userList)" styleClass="p-button-text"></p-button>
    </div>
    <p-table [loading]="loading" #dt [value]="userList" [paginator]="true" [rows]="10" [(first)]="firstUsers" [style]="{'width':'600px'}">
        <ng-template pTemplate="caption">
            <tr>
                <th class="tituloTabla">{{resourceBundle.label_title_users_registed}}</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="header">
            <tr class="textoFuente14Negrita">
                <th>{{resourceBundle.label_identification}}</th>
                <th>{{resourceBundle.label_name}}</th>
                <th>{{resourceBundle.label_mail}}</th>
                <th>{{resourceBundle.label_apply}}</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData>
            <tr class="textoFuente12Negrita">
                <td>
                    {{rowData.identification}}
                </td>
                <td>
                    {{rowData.name}}
                </td>
                <td>
                    {{rowData.mail}}
                </td>
                <td>
                    <p-button label="{{resourceBundle.button_search}}"  icon="pi pi-search" iconPos="left" (click)="onShowLoanApplications(rowData)"></p-button>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <br>
    <div align="center">
        <p-messages [(value)]="msgs"></p-messages>
    </div>
</div>
<div class="container">
    <p-dialog [header]="headerTitle" [(visible)]="showLoanApplications" [modal]="true" [style]="{width: '700px'}" [baseZIndex]="10000"
    [draggable]="false" [resizable]="false">
        <div class="p-mb-3">
            <p-button type="button" icon="pi pi-chevron-left" (click)="prev()" [disabled]="isFirstPage(loanApplications)" styleClass="p-button-text"></p-button>
            <p-button type="button" icon="pi pi-refresh" (click)="reset()" styleClass="p-button-text"></p-button>
            <p-button type="button" icon="pi pi-chevron-right" (click)="next()" [disabled]="isLastPage(loanApplications)" styleClass="p-button-text"></p-button>
        </div>
        <p-table [loading]="loading" [value]="loanApplications" #dt [paginator]="true" [rows]="5" [(first)]="first" [rowsPerPageOptions]="[10,25,50]" [style]="{'width':'600px'}">
        <ng-template pTemplate="caption">
            <tr>
                <th class="tituloTabla">{{resourceBundle.label_title_loan_applications}}</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="header">
            <tr class="textoFuente14Negrita">
                <th>{{resourceBundle.label_amount_loan}}</th>
                <th>{{resourceBundle.label_pay_date}}</th>
                <th>{{resourceBundle.label_pay_credit}}</th>
                <th>{{resourceBundle.label_state}}</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData>
            <tr class="textoFuente12Negrita">
                <td>
                    {{rowData.amountLoan | currency:'USD':'symbol-narrow':'3.2-2'}}
                </td>
                <td>
                    {{rowData.payDate | date:'dd/MM/yyyy'}}
                </td>
                <td>
                    <div *ngIf="!rowData.payCredit && rowData.state !== 'REJECTED'"><p-button label="Pagar"  icon="pi pi-paypal" iconPos="left" (click)="onPayAmount()"></p-button></div>
                    <div *ngIf="rowData.payCredit && rowData.state !== 'REJECTED'">Saldado</div>
                    <div *ngIf="rowData.state == 'REJECTED'">Cancelado</div>
                </td>
                <td>
                    {{rowData.state}}
                </td>
            </tr>
        </ng-template>
        </p-table>
    </p-dialog>
</div>
